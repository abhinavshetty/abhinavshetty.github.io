"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[210],{3210:(Ve,h,o)=>{o.r(h),o.d(h,{SalePlanModule:()=>Ae});var r=o(177),m=o(4341),f=o(3383),g=o(1141),b=o(563),v=o(9998),S=o(2242),C=o(981),x=o(8833),k=o(1570),u=o(4945),T=o(2365),_=o(5779),P=o(3695),G=o(1562),N=o(6121),e=o(4438),y=o(5945);const d=N.K.apiUrl+"/api/plan",B={headers:new G.Lr({"Content-Type":"application/json"})};let I=(()=>{class n{constructor(t,a){this.http=t,this.storageService=a}getPlanByRegion(){return this.http.get(d)}getMinimumSchemeSalePrices(){return this.http.get(d+"/prices")}addItemToPlan(t){return this.http.post(d,t,B)}deleteItemInPlan(t){return this.http.delete(d,{body:t})}static{this.\u0275fac=function(a){return new(a||n)(e.KVO(G.Qq),e.KVO(y.n))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}}return n})();var F=o(4420),c=o(9969);const E=(n,p,t,a)=>({index:n,active:p,highlighted:t,class:"p-stepper-action",headerClass:"p-stepper-action",numberClass:"p-stepper-number",titleClass:"p-stepper-title",onClick:a});function A(n,p){1&n&&e.eu8(0)}function V(n,p){if(1&n&&(e.qex(0),e.DNE(1,A,1,0,"ng-container",2),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.template)("ngTemplateOutletContext",e.ziG(2,E,t.index,t.active,t.highlighted,t.onClick))}}function X(n,p){if(1&n){const t=e.RV6();e.j41(0,"p-button",3),e.bIt("click",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.onClick.emit(i,l.index))}),e.j41(1,"span",4),e.EFF(2),e.k0s(),e.j41(3,"span",5),e.EFF(4),e.k0s()()}if(2&n){const t=e.XpG();e.Y8G("id",t.id)("tabindex",t.disabled?-1:void 0)("aria-controls",t.ariaControls),e.R7$(2),e.JRh(t.index+1),e.R7$(2),e.JRh(t.getStepProp)}}const $=(n,p,t,a)=>({index:n,active:p,highlighted:t,class:a});function Y(n,p){1&n&&e.eu8(0)}function O(n,p){if(1&n&&(e.qex(0),e.DNE(1,Y,1,0,"ng-container",2),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.template)("ngTemplateOutletContext",e.ziG(2,$,t.index,t.active,t.highlighted,t.separatorClass))}}function H(n,p){if(1&n&&e.nrm(0,"span",3),2&n){const t=e.XpG();e.HbH(t.separatorClass)}}const M=(n,p,t,a,i,l)=>({index:n,active:p,highlighted:t,onClick:a,prevCallback:i,nextCallback:l});function w(n,p){1&n&&e.eu8(0)}function U(n,p){if(1&n&&(e.qex(0),e.DNE(1,w,1,0,"ng-container",2),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.template)("ngTemplateOutletContext",e.l4e(2,M,t.index,t.active,t.highlighted,t.onClick,t.prevCallback,t.nextCallback))}}function Q(n,p){1&n&&e.eu8(0)}function L(n,p){if(1&n&&(e.qex(0),e.DNE(1,Q,1,0,"ng-container",3),e.bVm()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.stepperPanel)}}function J(n,p){if(1&n&&e.DNE(0,L,2,1,"ng-container",1),2&n){const t=e.XpG(2);e.Y8G("ngIf",t.stepperPanel)}}function z(n,p){1&n&&e.DNE(0,J,1,1,"ng-template")}const K=["*"],j=(n,p)=>({"p-highlight":n,"p-disabled":p}),q=n=>({"p-stepper-panel-active":n}),R=n=>({transitionParams:n}),W=n=>({value:"visible",params:n}),Z=n=>({value:"hidden",params:n});function ee(n,p){1&n&&e.eu8(0)}function te(n,p){if(1&n&&(e.qex(0),e.DNE(1,ee,1,0,"ng-container",4),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.startTemplate)}}function ne(n,p){if(1&n&&(e.qex(0),e.nrm(1,"p-stepperSeparator",10),e.bVm()),2&n){const t=e.XpG(),a=t.$implicit,i=t.index,l=e.XpG(2);e.R7$(),e.Y8G("template",a.separatorTemplate)("separatorClass","p-stepper-separator")("stepperPanel",a)("index",i)("active",l.isStepActive(i))("highlighted",i<l.activeStep)}}function ae(n,p){if(1&n){const t=e.RV6();e.j41(0,"li",8)(1,"p-stepperHeader",9),e.bIt("onClick",function(i){const l=e.eBV(t).index,s=e.XpG(2);return e.Njj(s.onItemClick(i,l))}),e.k0s(),e.DNE(2,ne,2,6,"ng-container",2),e.k0s()}if(2&n){const t=p.$implicit,a=p.index,i=e.XpG(2);e.Y8G("key",i.getStepKey(t,a))("ngClass",e.l_i(20,j,i.isStepActive(a),i.isItemDisabled(a)))("data-pc-name",i.stepperPanel)("data-p-highlight",i.isStepActive(a))("data-p-disabled",i.isItemDisabled(a))("data-pc-index",a)("data-p-active",i.isStepActive(a)),e.BMQ("aria-current",i.isStepActive(a)?"step":void 0),e.R7$(),e.HbH("p-stepper-action"),e.Y8G("id",i.getStepHeaderActionId(a))("template",t.headerTemplate)("stepperPanel",t)("getStepProp",i.getStepProp(t,"header"))("index",a)("disabled",i.isItemDisabled(a))("active",i.isStepActive(a))("highlighted",a<i.activeStep)("aria-controls",i.getStepContentId(a)),e.R7$(),e.Y8G("ngIf",a!==i.stepperPanels.length-1)}}function ie(n,p){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"p-stepperContent",11),e.bIt("onClick",function(i){e.eBV(t);const l=e.XpG().index,s=e.XpG(2);return e.Njj(s.onItemClick(i,l))})("nextCallback",function(i){e.eBV(t);const l=e.XpG().index,s=e.XpG(2);return e.Njj(s.nextCallback(i,l))})("prevCallback",function(i){e.eBV(t);const l=e.XpG().index,s=e.XpG(2);return e.Njj(s.prevCallback(i,l))}),e.k0s(),e.bVm()}if(2&n){const t=e.XpG(),a=t.$implicit,i=t.index,l=e.XpG(2);e.R7$(),e.Y8G("id",l.getStepContentId(i))("template",a.contentTemplate)("orientation",l.orientation)("stepperPanel",a)("index",i)("active",l.isStepActive(i))("highlighted",i<l.activeStep)("ariaLabelledby",l.getStepHeaderActionId(i))}}function le(n,p){if(1&n&&e.DNE(0,ie,2,8,"ng-container",2),2&n){const t=p.index,a=e.XpG(2);e.Y8G("ngIf",a.isStepActive(t))}}function pe(n,p){if(1&n&&(e.qex(0),e.j41(1,"ul",5),e.DNE(2,ae,3,23,"ng-template",6),e.k0s(),e.j41(3,"div",7),e.DNE(4,le,1,1,"ng-template",6),e.k0s(),e.bVm()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.panels)("ngForTrackBy",t.trackByFn),e.R7$(2),e.Y8G("ngForOf",t.panels)("ngForTrackBy",t.trackByFn)}}function se(n,p){if(1&n&&(e.qex(0),e.nrm(1,"p-stepperSeparator",10),e.bVm()),2&n){const t=e.XpG(),a=t.$implicit,i=t.index,l=e.XpG(2);e.R7$(),e.Y8G("template",a.separatorTemplate)("separatorClass","p-stepper-separator")("stepperPanel",a)("index",i)("active",l.isStepActive(i))("highlighted",i<l.activeStep)}}function oe(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",12)(1,"div",13)(2,"p-stepperHeader",9),e.bIt("onClick",function(i){const l=e.eBV(t).index,s=e.XpG(2);return e.Njj(s.onItemClick(i,l))}),e.k0s()(),e.j41(3,"div",14),e.DNE(4,se,2,6,"ng-container",2),e.j41(5,"p-stepperContent",11),e.bIt("onClick",function(i){const l=e.eBV(t).index,s=e.XpG(2);return e.Njj(s.onItemClick(i,l))})("nextCallback",function(i){const l=e.eBV(t).index,s=e.XpG(2);return e.Njj(s.nextCallback(i,l))})("prevCallback",function(i){const l=e.eBV(t).index,s=e.XpG(2);return e.Njj(s.prevCallback(i,l))}),e.k0s()()()}if(2&n){const t=p.$implicit,a=p.index,i=e.XpG(2);e.Y8G("key",i.getStepKey(t,a))("ngClass",e.eq3(30,q,"vertical"===i.orientation&&i.isStepActive(a)))("data-pc-name","stepperpanel")("data-p-highlight",i.isStepActive(a))("data-p-disabled",i.isItemDisabled(a))("data-pc-index",a)("data-p-active",i.isStepActive(a)),e.BMQ("aria-current",i.isStepActive(a)?"step":void 0),e.R7$(),e.Y8G("ngClass",e.l_i(32,j,i.isStepActive(a),i.isItemDisabled(a))),e.R7$(),e.HbH("p-stepper-action"),e.Y8G("id",i.getStepHeaderActionId(a))("template",t.headerTemplate)("stepperPanel",t)("getStepProp",i.getStepProp(t,"header"))("index",a)("disabled",i.isItemDisabled(a))("active",i.isStepActive(a))("highlighted",a<i.activeStep)("aria-controls",i.getStepContentId(a)),e.R7$(),e.Y8G("@tabContent",i.isStepActive(a)?e.eq3(37,W,e.eq3(35,R,i.transitionOptions)):e.eq3(41,Z,e.eq3(39,R,i.transitionOptions))),e.R7$(),e.Y8G("ngIf",a!==i.stepperPanels.length-1),e.R7$(),e.Y8G("id",i.getStepContentId(a))("template",t.contentTemplate)("orientation",i.orientation)("stepperPanel",t)("index",a)("active",i.isStepActive(a))("highlighted",a<i.activeStep)("ariaLabelledby",i.getStepHeaderActionId(a))}}function re(n,p){if(1&n&&e.DNE(0,oe,6,43,"ng-template",6),2&n){const t=e.XpG();e.Y8G("ngForOf",t.panels)("ngForTrackBy",t.trackByFn)}}function ce(n,p){1&n&&e.eu8(0)}function _e(n,p){if(1&n&&(e.qex(0),e.DNE(1,ce,1,0,"ng-container",4),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.endTemplate)}}let de=(()=>{class n{id;template;stepperPanel;index;disabled;active;highlighted;getStepProp;ariaControls;onClick=new e.bkB;static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["p-stepperHeader"]],hostAttrs:[1,"p-element"],inputs:{id:"id",template:"template",stepperPanel:"stepperPanel",index:"index",disabled:"disabled",active:"active",highlighted:"highlighted",getStepProp:"getStepProp",ariaControls:"ariaControls"},outputs:{onClick:"onClick"},decls:3,vars:2,consts:[["buttonRef",""],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tab",1,"p-stepper-action",3,"click","id","tabindex","aria-controls"],[1,"p-stepper-number"],[1,"p-stepper-title"]],template:function(a,i){if(1&a&&e.DNE(0,V,2,7,"ng-container",1)(1,X,5,5,"ng-template",null,0,e.C5r),2&a){const l=e.sdS(2);e.Y8G("ngIf",i.template)("ngIfElse",l)}},dependencies:[r.bT,r.T3],encapsulation:2})}return n})(),me=(()=>{class n{template;separatorClass;stepperPanel;index;active;highlighted;static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["p-stepperSeparator"]],hostAttrs:[1,"p-stepper-separator"],inputs:{template:"template",separatorClass:"separatorClass",stepperPanel:"stepperPanel",index:"index",active:"active",highlighted:"highlighted"},decls:3,vars:2,consts:[["span",""],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"]],template:function(a,i){if(1&a&&e.DNE(0,O,2,7,"ng-container",1)(1,H,1,2,"ng-template",null,0,e.C5r),2&a){const l=e.sdS(2);e.Y8G("ngIf",i.template)("ngIfElse",l)}},dependencies:[r.bT,r.T3],encapsulation:2})}return n})(),ge=(()=>{class n{id;orientation;template;ariaLabelledby;stepperPanel;index;active;highlighted;onClick=new e.bkB;prevCallback=new e.bkB;nextCallback=new e.bkB;static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["p-stepperContent"]],hostVars:6,hostBindings:function(a,i){2&a&&e.AVh("p-stepper-content",!0)("p-element",!0)("p-toggleable-content","vertical"===i.orientation)},inputs:{id:"id",orientation:"orientation",template:"template",ariaLabelledby:"ariaLabelledby",stepperPanel:"stepperPanel",index:"index",active:"active",highlighted:"highlighted"},outputs:{onClick:"onClick",prevCallback:"prevCallback",nextCallback:"nextCallback"},decls:3,vars:6,consts:[["role","tabpanel","data-pc-name","stepperpanel",3,"id"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"]],template:function(a,i){1&a&&(e.j41(0,"div",0),e.DNE(1,U,2,9,"ng-container",1)(2,z,1,0,null,1),e.k0s()),2&a&&(e.Y8G("id",i.id),e.BMQ("data-pc-index",i.index)("data-p-active",i.active)("aria-labelledby",i.ariaLabelledby),e.R7$(),e.Y8G("ngIf",i.template),e.R7$(),e.Y8G("ngIf",!i.template))},dependencies:[r.bT,r.T3],encapsulation:2})}return n})(),D=(()=>{class n{header;templates;headerTemplate;startTemplate;contentTemplate;separatorTemplate;endTemplate;ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"content":this.contentTemplate=t.template;break;case"separator":this.separatorTemplate=t.template}})}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["p-stepperPanel"]],contentQueries:function(a,i,l){if(1&a&&e.wni(l,_.Ei,4),2&a){let s;e.mGM(s=e.lsd())&&(i.templates=s)}},hostAttrs:[1,"p-element"],inputs:{header:"header"},ngContentSelectors:K,decls:1,vars:0,template:function(a,i){1&a&&(e.NAR(),e.SdG(0))},encapsulation:2})}return n})(),ue=(()=>{class n{activeStep=0;orientation="horizontal";linear=!1;transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";stepperPanels;templates;onClick=new e.bkB;activeStepChange=new e.bkB;headerTemplate;startTemplate;separatorTemplate;endTemplate;id=(0,F._Y)();panels;isStepActive(t){return this.activeStep===t}getStepProp(t){return t?.header?t.header:t?.content?t.content:void 0}getStepKey(t,a){return this.getStepProp(t)||a}getStepHeaderActionId(t){return`${this.id}_${t}_header_action`}getStepContentId(t){return`${this.id}_${t}_content`}updateActiveStep(t,a){this.activeStep=a,this.activeStepChange.emit(this.activeStep)}onItemClick(t,a){this.linear?t.preventDefault():a!==this.activeStep&&this.updateActiveStep(t,a)}isItemDisabled(t){return this.linear&&!this.isStepActive(t)}prevCallback(t,a){0!==a&&this.updateActiveStep(t,a-1)}nextCallback(t,a){a!==this.stepperPanels.length-1&&this.updateActiveStep(t,a+1)}trackByFn(t){return t}ngAfterContentInit(){this.panels=this.stepperPanels.toArray(),this.templates.forEach(t=>{switch(t.getType()){case"start":this.startTemplate=t.template;break;case"end":this.endTemplate=t.template}})}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["p-stepper"]],contentQueries:function(a,i,l){if(1&a&&(e.wni(l,D,4),e.wni(l,_.Ei,4)),2&a){let s;e.mGM(s=e.lsd())&&(i.stepperPanels=s),e.mGM(s=e.lsd())&&(i.templates=s)}},hostVars:6,hostBindings:function(a,i){2&a&&e.AVh("p-stepper",!0)("p-component",!0)("p-stepper-vertical","vertical"===i.orientation)},inputs:{activeStep:"activeStep",orientation:"orientation",linear:"linear",transitionOptions:"transitionOptions"},outputs:{onClick:"onClick",activeStepChange:"activeStepChange"},decls:6,vars:4,consts:[["vertical",""],["role","tablist"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],[1,"p-stepper-nav"],["ngFor","",3,"ngForOf","ngForTrackBy"],[1,"p-stepper-panels"],["role","presentation",1,"p-stepper-header",3,"key","ngClass","data-pc-name","data-p-highlight","data-p-disabled","data-pc-index","data-p-active"],[3,"onClick","id","template","stepperPanel","getStepProp","index","disabled","active","highlighted","aria-controls"],[3,"template","separatorClass","stepperPanel","index","active","highlighted"],[3,"onClick","nextCallback","prevCallback","id","template","orientation","stepperPanel","index","active","highlighted","ariaLabelledby"],[1,"p-stepper-panel",3,"key","ngClass","data-pc-name","data-p-highlight","data-p-disabled","data-pc-index","data-p-active"],[1,"p-stepper-header",3,"ngClass"],[1,"p-stepper-toggleable-content"]],template:function(a,i){if(1&a&&(e.j41(0,"div",1),e.DNE(1,te,2,1,"ng-container",2)(2,pe,5,4,"ng-container",3)(3,re,1,2,"ng-template",null,0,e.C5r)(5,_e,2,1,"ng-container",2),e.k0s()),2&a){const l=e.sdS(4);e.R7$(),e.Y8G("ngIf",i.startTemplate),e.R7$(),e.Y8G("ngIf","horizontal"===i.orientation)("ngIfElse",l),e.R7$(3),e.Y8G("ngIf",i.endTemplate)}},dependencies:[r.YU,r.Sq,r.bT,r.T3,ge,de,me],styles:["@layer primeng{.p-stepper-vertical .p-stepper-panel>.p-stepper-toggleable-content{overflow:hidden}.p-stepper-vertical .p-stepper-panel-active>.p-stepper-toggleable-content:not(.ng-animating){overflow:inherit}}\n"],encapsulation:2,data:{animation:[(0,c.hZ)("tabContent",[(0,c.wk)("hidden",(0,c.iF)({height:"0",visibility:"hidden"})),(0,c.wk)("visible",(0,c.iF)({height:"*",visibility:"visible"})),(0,c.kY)("visible <=> hidden",[(0,c.i0)("250ms cubic-bezier(0.86, 0, 0.07, 1)")]),(0,c.kY)("void => *",(0,c.i0)(0))])]},changeDetection:0})}return n})(),he=(()=>{class n{static \u0275fac=function(a){return new(a||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[r.MD,_.Gg,_.Gg]})}return n})();const fe=()=>({width:"35%"}),be=()=>({width:"450px"});function ve(n,p){if(1&n){const t=e.RV6();e.j41(0,"p-button",15),e.bIt("onClick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showPlanAddDialog())}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("loading",t.loading)}}function Se(n,p){1&n&&(e.j41(0,"div")(1,"h2"),e.EFF(2,"You do not have access to view this page."),e.k0s()())}function Ce(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",21)(1,"span",22),e.nrm(2,"i",23),e.j41(3,"input",24),e.bIt("input",function(i){e.eBV(t),e.XpG();const l=e.sdS(4),s=e.XpG(3);return e.Njj(s.onGlobalFilter(l,i))}),e.k0s()()()}}function xe(n,p){if(1&n&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&n){const t=p.$implicit;e.R7$(),e.SpI(" ",t.header," ")}}function ke(n,p){if(1&n&&(e.j41(0,"tr"),e.DNE(1,xe,2,1,"th",25),e.nrm(2,"th"),e.k0s()),2&n){const t=p.$implicit;e.R7$(),e.Y8G("ngForOf",t)}}function Te(n,p){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=p.$implicit,a=e.XpG().$implicit;e.R7$(),e.SpI(" ",a[t.field]," ")}}function Pe(n,p){if(1&n){const t=e.RV6();e.j41(0,"tr"),e.DNE(1,Te,2,1,"td",25),e.j41(2,"td")(3,"div",26)(4,"button",27),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG(4);return e.Njj(l.editPlan(i))}),e.k0s(),e.j41(5,"button",28),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG(4);return e.Njj(l.deletePlan(i))}),e.k0s()()()()}if(2&n){const t=p.columns;e.R7$(),e.Y8G("ngForOf",t)}}function Ge(n,p){if(1&n&&(e.j41(0,"div")(1,"h2"),e.EFF(2),e.k0s(),e.j41(3,"p-table",17,0),e.DNE(5,Ce,4,0,"ng-template",18)(6,ke,3,1,"ng-template",19)(7,Pe,6,1,"ng-template",20),e.k0s()()),2&n){const t=e.XpG(2).$implicit,a=e.XpG();e.R7$(2),e.SpI("Planned sale value : INR ",a.saleValuesByRegion[t.content]," (at scheme rates)"),e.R7$(),e.Y8G("value",a.plansInTab[t.content])("columns",a.planCols)("globalFilterFields",a.filterFields)}}function ye(n,p){if(1&n&&e.DNE(0,Se,3,0,"div",13)(1,Ge,8,4,"div",13),2&n){const t=e.XpG().$implicit,a=e.XpG();e.Y8G("ngIf",!a.hasAccess(t.content)),e.R7$(),e.Y8G("ngIf",a.hasAccess(t.content))}}function Ie(n,p){1&n&&(e.j41(0,"p-tabPanel",16),e.DNE(1,ye,2,2,"ng-template",7),e.k0s()),2&n&&e.Y8G("header",p.$implicit.title)}function je(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",29)(1,"p-dropdown",30),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.selectedProduct,i)||(l.selectedProduct=i),e.Njj(i)}),e.k0s()(),e.j41(2,"div",31)(3,"p-button",32),e.bIt("onClick",function(){const i=e.eBV(t).nextCallback,l=e.XpG();return e.Njj(l.moveStep2(i))}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("options",t.products),e.R50("ngModel",t.selectedProduct),e.Y8G("filter",!0)}}function Re(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",29)(1,"p-inputNumber",33),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.planItem.quantity,i)||(l.planItem.quantity=i),e.Njj(i)}),e.k0s()(),e.j41(2,"div",34)(3,"p-button",35),e.bIt("onClick",function(){const i=e.eBV(t).prevCallback;return e.Njj(i.emit())}),e.k0s(),e.j41(4,"p-button",32),e.bIt("onClick",function(){const i=e.eBV(t).nextCallback;return e.Njj(i.emit())}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.R50("ngModel",t.planItem.quantity)}}function De(n,p){if(1&n){const t=e.RV6();e.j41(0,"div",29)(1,"h3"),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.j41(4,"h3"),e.EFF(5),e.k0s()(),e.j41(6,"div",36)(7,"p-button",35),e.bIt("onClick",function(){const i=e.eBV(t).prevCallback;return e.Njj(i.emit())}),e.k0s(),e.j41(8,"p-button",37),e.bIt("onClick",function(){const i=e.eBV(t).prevCallback,l=e.XpG();return e.Njj(l.addToPlan(i))}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(2),e.JRh(t.planItem.quantity),e.R7$(3),e.JRh(t.planItem.productName)}}function Ne(n,p){if(1&n&&(e.j41(0,"span"),e.EFF(1,"Are you sure you want to delete plan for "),e.j41(2,"b"),e.EFF(3),e.k0s(),e.EFF(4,"?"),e.k0s()),2&n){const t=e.XpG();e.R7$(3),e.JRh(t.planItem.productName)}}function Be(n,p){if(1&n){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deletePlanDialog=!1)}),e.k0s(),e.j41(1,"button",39),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.confirmDelete())}),e.k0s()}}let Fe=(()=>{class n{constructor(t,a,i,l){this.stockService=t,this.planService=a,this.msgService=i,this.stgService=l,this.products=[],this.cols=[],this.planCols=[],this.filterFields=[],this.tabs=[],this.plansInTab={WEST:[],SOUTH:[],EAST:[],NORTH:[]},this.showAddPlanButton=!0,this.saleValuesByRegion={WEST:0,EAST:0,NORTH:0,SOUTH:0},this.visible=!1,this.planItem={},this.loading=!1,this.deletePlanDialog=!1,"HO"===this.stgService.getUser().region&&(this.showAddPlanButton=!1)}hasAccess(t){return"HO"==this.stgService.getUser().region||this.stgService.getUser().region===t}ngOnInit(){this.tabs=[{title:"West",content:"WEST"},{title:"South",content:"SOUTH"},{title:"East",content:"EAST"},{title:"North",content:"NORTH"}],this.planCols=[{field:"productName",header:"Product Name"},{field:"quantity",header:"Sale Quantity Planned"}],this.filterFields=this.planCols.map(t=>t.field),(null==this.products||0==this.products.length)&&this.stockService.getStockAvailability().subscribe(t=>{this.products=t,this.products=this.products.filter(a=>"out"!=a.availability)}),(null==this.plans||0==this.plans.length)&&this.getPlanData()}getPlanData(){this.tabs.forEach(t=>this.plansInTab[t.content]=[]),this.planService.getPlanByRegion().subscribe(t=>{this.plans=t,this.saleValuesByRegion={WEST:0,EAST:0,NORTH:0,SOUTH:0},this.plans.forEach(a=>{this.plansInTab[a.region].push(a),this.saleValuesByRegion[a.region]=this.saleValuesByRegion[a.region]+(a.quantity&&a.unitPrice?a.quantity*a.unitPrice:0)})})}onGlobalFilter(t,a){t.filterGlobal(a.target.value,"contains")}showPlanAddDialog(){this.loading=!0,this.planItem={},null==this.products||0==this.products.length?this.stockService.getStockAvailability().subscribe(t=>{this.visible=!0,this.loading=!1,this.products=t,this.products=this.products.filter(a=>"out"!==a.availability)}):(this.visible=!0,this.loading=!1)}moveStep2(t){this.planItem.productName=this.selectedProduct.name,t.emit()}addToPlan(t){this.loading=!0,this.planItem.region=null,this.planItem.unitPrice=null,this.planService.addItemToPlan(this.planItem).subscribe(a=>{this.msgService.add({severity:"success",summary:"Success",detail:"Added to plan successfully"}),this.getPlanData(),this.visible=!1,this.loading=!1,t.emit(),t.emit()},a=>{this.visible=!1,this.loading=!1,this.msgService.add({severity:"error",summary:"Fail",detail:"Could not add to plan"}),t.emit(),t.emit()})}deletePlan(t){this.deletePlanDialog=!0,this.planItem={...t}}confirmDelete(){this.planService.deleteItemInPlan(this.planItem).subscribe(t=>{this.msgService.add({severity:"success",summary:"Success",detail:t.message}),this.getPlanData(),this.deletePlanDialog=!1},t=>{this.msgService.add({severity:"error",summary:"Fail",detail:"Could not update plan!"})})}editPlan(t){this.msgService.add({severity:"error",summary:"Fail",detail:"Edit plan function is not working. Please delete and add again!"})}static{this.\u0275fac=function(a){return new(a||n)(e.rXU(P.Q),e.rXU(I),e.rXU(_.bg),e.rXU(y.n))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ng-component"]],features:[e.Jv_([_.bg,P.Q,I])],decls:19,vars:14,consts:[["dt",""],[1,"col-12"],["label","Add a sale plan",3,"loading","onClick",4,"ngIf"],[3,"header",4,"ngFor","ngForOf"],["header","Add a plan item",1,"p-fluid",3,"visibleChange","modal","visible"],[3,"linear"],["header","Select a tool"],["pTemplate","content"],["header","Add quantity planned"],["header","Finalize plan addition"],["header","Confirm",3,"visibleChange","visible","modal"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],["pTemplate","footer"],["label","Add a sale plan",3,"onClick","loading"],[3,"header"],["styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","columns","globalFilterFields"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"input"],[4,"ngFor","ngForOf"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],[1,"flex","flex-column","h-12rem"],["optionLabel","name","filterBy","name",3,"ngModelChange","options","ngModel","filter"],[1,"flex","pt-4","justify-content-end"],["label","Next","icon","pi pi-arrow-right","iconPos","right",3,"onClick"],["inputId","integeronly",3,"ngModelChange","ngModel"],[1,"flex","pt-4","justify-content-between"],["label","Back","icon","pi pi-arrow-left",3,"onClick"],[1,"flex","pt-4","justify-content-start"],["label","Submit","iconPos","right",3,"onClick"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(a,i){1&a&&(e.j41(0,"div",1),e.nrm(1,"p-toast"),e.DNE(2,ve,1,1,"p-button",2),e.nrm(3,"br"),e.j41(4,"p-tabView"),e.DNE(5,Ie,2,1,"p-tabPanel",3),e.k0s(),e.j41(6,"p-dialog",4),e.mxI("visibleChange",function(s){return e.DH7(i.visible,s)||(i.visible=s),s}),e.j41(7,"p-stepper",5)(8,"p-stepperPanel",6),e.DNE(9,je,4,3,"ng-template",7),e.k0s(),e.j41(10,"p-stepperPanel",8),e.DNE(11,Re,5,1,"ng-template",7),e.k0s(),e.j41(12,"p-stepperPanel",9),e.DNE(13,De,9,2,"ng-template",7),e.k0s()()(),e.j41(14,"p-dialog",10),e.mxI("visibleChange",function(s){return e.DH7(i.deletePlanDialog,s)||(i.deletePlanDialog=s),s}),e.j41(15,"div",11),e.nrm(16,"i",12),e.DNE(17,Ne,5,1,"span",13),e.k0s(),e.DNE(18,Be,2,0,"ng-template",14),e.k0s()()),2&a&&(e.R7$(2),e.Y8G("ngIf",i.showAddPlanButton),e.R7$(3),e.Y8G("ngForOf",i.tabs),e.R7$(),e.Aen(e.lJ4(12,fe)),e.Y8G("modal",!0),e.R50("visible",i.visible),e.R7$(),e.Y8G("linear",!0),e.R7$(7),e.Aen(e.lJ4(13,be)),e.R50("visible",i.deletePlanDialog),e.Y8G("modal",!0),e.R7$(3),e.Y8G("ngIf",i.planItem))},dependencies:[r.Sq,r.bT,f.XI,_.Ei,m.BC,m.vS,g._f,g.$n,b.n,v.y8,S.S,x.ms,C.YI,k.l,u.JQ,u.Kp,ue,D],styles:["td[_ngcontent-%COMP%]{padding:0%}"]})}}return n})(),Ee=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[T.iI.forChild([{path:"",component:Fe}]),T.iI]})}}return n})(),Ae=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[r.MD,Ee,f.bG,m.YN,g.tm,b.Z,v.MB,S.u,x.kr,C.O3,k.P,u.fd,he]})}}return n})()}}]);